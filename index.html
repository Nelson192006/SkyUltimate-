<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SkyUltimate ‚Äì Sign In / Register</title>
<style>
  :root{ --red:#C00000; --white:#fff; --muted:#6b7280; }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
    background:var(--red); /* Red background */
    color:var(--white);
  }

  /* Splash */
  #splash{
    position:fixed; inset:0; background:var(--red); display:flex; align-items:center; justify-content:center;
    z-index:9999; opacity:0; animation:fadeIn .5s ease forwards, fadeOut .6s ease 2.6s forwards;
  }
  .logo{
    width:120px;height:120px;border-radius:50%;background:var(--white);
    box-shadow:0 0 0 6px rgba(255,255,255,.35), 0 20px 60px rgba(0,0,0,.25);
    display:flex;align-items:center;justify-content:center;font-weight:900;color:var(--red);font-size:26px;
  }
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}
  @keyframes fadeOut{to{opacity:0;visibility:hidden}}

  .wrap{max-width:920px;margin:28px auto;padding:0 16px;}
  .brand{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:18px}
  .brand img{width:84px;height:84px;border-radius:50%;background:#fff;object-fit:contain;}

  .card{background:#fff;border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.2);padding:18px;color:#000;}
  .tabs{display:flex;gap:8px;margin-bottom:14px;}
  .tabs button{flex:1;padding:12px;border-radius:999px;border:1px solid #e5e7eb;background:#fff;font-weight:800;cursor:pointer}
  .tabs button.active{background:var(--red);border-color:var(--red);color:#fff}
  .row{display:grid;gap:12px;margin:10px 0;}
  label{font-size:.9rem;color:#374151;font-weight:700}
  input, select{
    width:100%;padding:12px 14px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;font-size:15px;
  }
  .field{display:grid;gap:6px}
  .inline{display:flex;gap:8px;align-items:center;justify-content:space-between;flex-wrap:wrap}
  .btn{background:var(--red);color:#fff;border:none;padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:800}
  .btn.secondary{background:#eef2ff;color:#1f2937}
  .muted{color:var(--muted);font-size:.92rem}
  .error{color:#b91c1c;font-weight:700}
  .success{color:#047857;font-weight:700}
  .hint{font-size:.82rem;color:#6b7280}
  .eye{position:absolute;right:12px;top:50%;transform:translateY(-50%);cursor:pointer;color:#6b7280}
  .rel{position:relative}
  footer{margin:26px 0;text-align:center;color:#fff}
</style>
</head>
<body>
<div id="splash"><div class="logo"><img src="your-logo.png" alt="SkyUltimate Logo"/></div></div>

<div class="wrap">
  <div class="brand">
    <img src="your-logo.png" alt="SkyUltimate Logo"/>
    <div class="muted" style="color:#fff;">Welcome to SkyUltimate Delivery Service</div>
  </div>

  <div class="card">
    <div class="tabs">
      <button id="tabLogin" class="active">Login</button>
      <button id="tabRegister">Register</button>
    </div>

    <!-- LOGIN -->
    <div id="loginView">
      <div class="row">
        <div class="field">
          <label>Role</label>
          <select id="loginRole">
            <option value="">Select your role</option>
            <option value="customer">Customer</option>
            <option value="agent">Agent</option>
            <option value="admin">Admin</option>
            <option value="superadmin">Super-admin</option>
          </select>
        </div>
        <div class="field">
          <label>Email</label>
          <input id="loginEmail" type="email" placeholder="Enter your email"/>
        </div>
        <div class="field rel">
          <label>Password</label>
          <input id="loginPassword" type="password" placeholder="Enter your password"/>
          <span class="eye" data-toggle="#loginPassword">üëÅ</span>
        </div>
      </div>
      <div class="inline">
        <a class="muted" href="#" id="forgot">Forgot Password?</a>
        <button class="btn" id="loginBtn">Login</button>
      </div>
      <div id="loginMsg" class="muted" style="margin-top:8px;"></div>
    </div>

    <!-- REGISTER -->
    <div id="registerView" style="display:none;">
      <div class="row">
        <div class="field">
          <label>Role</label>
          <select id="regRole"></select>
          <div class="hint">Super-admin only appears for first-ever registration.</div>
        </div>
        <div class="field">
          <label>Full Name</label>
          <input id="regName" type="text" placeholder="Full name"/>
        </div>
        <div class="field">
          <label>Email</label>
          <input id="regEmail" type="email" placeholder="Email address"/>
        </div>
        <div class="field rel">
          <label>Password</label>
          <input id="regPassword" type="password" placeholder="Create a password"/>
          <span class="eye" data-toggle="#regPassword">üëÅ</span>
        </div>

        <!-- Agent extras -->
        <div id="agentMore" style="display:none;">
          <div class="field">
            <label>Phone Number</label>
            <input id="regPhone" type="tel" placeholder="+234 801 234 5678"/>
          </div>
          <div class="field">
            <label>Delivery Vehicle</label>
            <select id="regVehicle">
              <option value="">Select</option>
              <option>Motorcycle</option><option>Car</option><option>Van</option><option>Bicycle</option>
            </select>
          </div>
          <div class="field">
            <label>Bank Name</label>
            <input id="regBankName" type="text" placeholder="Bank name"/>
          </div>
          <div class="field">
            <label>Account Number</label>
            <input id="regAccountNumber" type="text" placeholder="1234567890"/>
          </div>
          <div class="field">
            <label>Account Holder Name</label>
            <input id="regAccountName" type="text" placeholder="Account holder"/>
          </div>
        </div>
      </div>
      <div class="inline">
        <span></span>
        <button class="btn" id="registerBtn">Create Account</button>
      </div>
      <div id="regMsg" class="muted" style="margin-top:8px;"></div>
    </div>
  </div>

  <footer>¬© <span id="yr"></span> SkyUltimate Delivery Service</footer>
</div>

<script>
const API = "https://33vhk4-50000.csb.app";
const $ = sel => document.querySelector(sel);
$("#yr").textContent = new Date().getFullYear();

// Role registration control
async function loadPublicConfig(){
  try{
    const res = await fetch(`${API}/config/public`);
    const conf = await res.json();
    const allowAdmin = !!conf.allowAdminRegistration;
    const hasAnyUser = !!conf.hasAnyUser;
    const sel = $("#regRole");
    sel.innerHTML = "";
    sel.append(new Option("Customer","customer"));
    sel.append(new Option("Agent","agent"));
    if(allowAdmin) sel.append(new Option("Admin","admin"));
    if(!hasAnyUser) sel.append(new Option("Super-admin","superadmin")); // only first time
  }catch(e){
    const sel = $("#regRole");
    sel.innerHTML = "";
    sel.append(new Option("Customer","customer"));
    sel.append(new Option("Agent","agent"));
  }
}
loadPublicConfig();
</script>
</body>
  </html>
